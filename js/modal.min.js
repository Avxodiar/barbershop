var buttonClose,closingModal,loginLink=document.querySelector(".user-menu .auth"),mapLink=document.querySelectorAll(".js-show-map"),modalOverlay=document.querySelector(".modal-overlay"),modalAuth=document.querySelector(".modal-auth"),formAuth=modalAuth.querySelector(".auth-form"),loginField=modalAuth.querySelector("[name=login]"),paswdField=modalAuth.querySelector("[name=password]"),modalMap=document.querySelector(".modal-map"),isStorageSupport=!0,storageLogin="";try{storageLogin=localStorage.getItem("login")}catch{isStorageSupport=!1}loginLink.addEventListener("click",evtShowModalLogin),mapLink.forEach(function(a){a.addEventListener("click",evtShowMap)}),modalOverlay.addEventListener("click",evtCloseByOverlay),window.addEventListener("keydown",evtCloseByEsc),loginField.addEventListener("input",evtLoginValidation),paswdField.addEventListener("input",evtPaswdValidation),formAuth.addEventListener("submit",evtFormValidation);function evtShowModalLogin(a){a.preventDefault(),modalOverlay.classList.add("modal-show"),modalAuth.classList.add("modal-show"),modalAuth.classList.add("modal-auth-show"),setTimeout(function(){modalAuth.classList.remove("modal-auth-show")},700),buttonClose=modalAuth.querySelector(".modal-close"),buttonClose.addEventListener("click",evtCloseModal),!loginField.value&&storageLogin&&(loginField.value=storageLogin),loginField.value?modalAuth.querySelector("[name=password]").focus():loginField.focus()}function evtShowMap(a){a.preventDefault(),modalOverlay.classList.add("modal-show"),modalMap.classList.add("modal-show"),buttonClose=modalMap.querySelector(".modal-close"),buttonClose.addEventListener("click",evtCloseModal),showFrameMap()}function evtCloseModal(a){a.preventDefault(),closingModal=buttonClose.closest(".modal"),closingModal.classList.remove("modal-show"),modalOverlay.classList.remove("modal-show")}function evtCloseByEsc(a){27===a.keyCode&&(closingModal=document.querySelectorAll(".modal-show"),closingModal.length&&(a.preventDefault(),closingModal.forEach(function(a){a.classList.remove("modal-show")}),modalOverlay.classList.remove("modal-show")))}function evtCloseByOverlay(){closingModal=document.querySelectorAll(".modal-show"),closingModal.forEach(function(a){a.classList.remove("modal-show")}),modalOverlay.classList.remove("modal-show")}function showFrameMap(){var a=modalMap.querySelector("iframe");null===a&&(a=document.createElement("iframe"),a.className="border0 modal-hide",a.width=766,a.height=560,a.src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1998.6036253003365!2d30.32085871651319!3d59.93871916905374!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4696310fca145cc1%3A0x42b32648d8238007!2z0JHQvtC70YzRiNCw0Y8g0JrQvtC90Y7RiNC10L3QvdCw0Y8g0YPQuy4sIDE5LzgsINCh0LDQvdC60YIt0J_QtdGC0LXRgNCx0YPRgNCzLCAxOTExODY!5e0!3m2!1sru!2sru!4v1561079752419!5m2!1sru!2sru",a.title=a.innerHTML="\u0410\u0434\u0440\u0435\u0441 \u0431\u0430\u0440\u0431\u0435\u0440\u0448\u043E\u043F\u0430: \u0433. \u0421\u0430\u043D\u043A\u0442-\u043F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433, \u0431. \u041A\u043E\u043D\u044E\u0448\u0435\u043D\u043D\u0430\u044F, \u0434. 19/8",modalMap.appendChild(a),a.addEventListener("load",function(){modalMap.removeChild(modalMap.querySelector("img")),a.classList.remove("modal-hide")}))}function evtLoginValidation(){loginField.value&&loginField.classList.remove("border-error")}function evtPaswdValidation(){paswdField.value&&paswdField.classList.remove("border-error")}function evtFormValidation(a){loginField.value&&paswdField.value?isStorageSupport&&localStorage.setItem("login",loginField.value):(a.preventDefault(),modalAuth.classList.remove("modal-error"),modalAuth.classList.add("modal-error"),!loginField.value&&(loginField.classList.add("border-error"),loginField.placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043B\u043E\u0433\u0438\u043D"),!paswdField.value&&(paswdField.classList.add("border-error"),paswdField.placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C"),setTimeout(function(){modalAuth.classList.remove("modal-error")},700))}